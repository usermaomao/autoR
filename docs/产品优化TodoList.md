# autoR 产品优化 TodoList

> 📅 创建日期：2025-01-27
> 👤 评审视角：产品经理
> 🎯 目标：系统性改进产品质量，达到正式发布标准

---

## 📊 项目健康度评估

| 维度 | 当前状态 | 目标状态 | 差距 |
|------|---------|---------|------|
| **功能完整度** | 70% | 95% | 🔴 离线功能缺失 |
| **测试覆盖率** | ~20% | 85% | 🔴 前端零测试 |
| **用户体验** | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | 🟡 FTUX 需改进 |
| **代码质量** | ⭐⭐⭐ | ⭐⭐⭐⭐ | 🟡 大组件需拆分 |
| **发布准备度** | ❌ 未就绪 | ✅ 可发布 | 🔴 需 4-6 周 |

---

## 🚨 P0 - 必须修复（阻塞发布）

### 1. 离线功能实现
**问题**：README 承诺 PWA 离线支持，实际 0% 实现

| 任务 | 优先级 | 工时 | 状态 |
|------|--------|------|------|
| [ ] 1.1 配置 Service Worker 基础框架 | P0 | 4h | 🔴 未开始 |
| [ ] 1.2 实现 IndexedDB 本地数据库封装 | P0 | 8h | 🔴 未开始 |
| [ ] 1.3 实现卡片数据本地缓存 | P0 | 6h | 🔴 未开始 |
| [ ] 1.4 实现字典查询结果缓存 | P0 | 4h | 🔴 未开始 |
| [ ] 1.5 实现离线评分队列 | P0 | 8h | 🔴 未开始 |
| [ ] 1.6 实现网络恢复自动同步 | P0 | 6h | 🔴 未开始 |

**验收标准**：
- 断网后可继续复习已缓存卡片
- 离线评分在网络恢复后自动同步
- 首次加载后，核心功能可离线使用

---

### 2. 前端测试覆盖
**问题**：4000+ 行 Vue 代码，零单元测试

| 任务 | 优先级 | 工时 | 状态 |
|------|--------|------|------|
| [ ] 2.1 搭建 Vitest + Vue Test Utils 测试框架 | P0 | 2h | 🔴 未开始 |
| [ ] 2.2 Review.vue 核心流程测试（5个用例） | P0 | 4h | 🔴 未开始 |
| [ ] 2.3 FlashCard.vue 组件测试（翻转、评分） | P0 | 3h | 🔴 未开始 |
| [ ] 2.4 CardForm.vue 表单验证测试 | P0 | 4h | 🔴 未开始 |
| [ ] 2.5 Cards.vue 批量操作测试 | P0 | 3h | 🔴 未开始 |
| [ ] 2.6 导入/导出功能测试 | P0 | 4h | 🔴 未开始 |

**验收标准**：
- 前端测试覆盖率 ≥ 70%
- 核心复习流程 100% 覆盖
- CI 流水线自动运行测试

---

### 3. AI 内容解析重构
**问题**：parseAIContent() 485 行"怪物函数"，无测试，易出错

| 任务 | 优先级 | 工时 | 状态 |
|------|--------|------|------|
| [ ] 3.1 提取 AI 解析为独立服务模块 | P0 | 4h | 🔴 未开始 |
| [ ] 3.2 拆分为 3 个格式解析器（九节/简化/星号） | P0 | 6h | 🔴 未开始 |
| [ ] 3.3 编写 15+ 单元测试用例 | P0 | 4h | 🔴 未开始 |
| [ ] 3.4 添加解析失败降级处理 | P0 | 2h | 🔴 未开始 |
| [ ] 3.5 后端统一 AI 输出格式 | P1 | 4h | 🔴 未开始 |

**验收标准**：
- AI 解析测试覆盖率 100%
- 解析失败时显示原始内容而非空白
- 支持容错处理（部分解析成功）

---

## 🔶 P1 - 高优先级（影响核心体验）

### 4. 错误处理与网络重试
**问题**：48 处 try-catch 仅弹窗提示，无重试机制

| 任务 | 优先级 | 工时 | 状态 |
|------|--------|------|------|
| [ ] 4.1 封装统一的 API 请求中间件 | P1 | 4h | 🔴 未开始 |
| [ ] 4.2 实现指数退避重试策略（3次） | P1 | 3h | 🔴 未开始 |
| [ ] 4.3 添加请求超时配置（10s） | P1 | 1h | 🔴 未开始 |
| [ ] 4.4 实现乐观更新机制 | P1 | 6h | 🔴 未开始 |
| [ ] 4.5 错误消息用户友好化 | P1 | 2h | 🔴 未开始 |

**验收标准**：
- 网络错误自动重试 3 次
- 用户可手动重试失败操作
- 错误消息清晰（"网络连接失败" vs "服务器错误"）

---

### 5. 数据安全与删除保护
**问题**：批量删除无确认，删除后无法恢复

| 任务 | 优先级 | 工时 | 状态 |
|------|--------|------|------|
| [ ] 5.1 添加批量删除二次确认对话框 | P1 | 2h | 🔴 未开始 |
| [ ] 5.2 实现软删除（逻辑删除）机制 | P1 | 4h | 🔴 未开始 |
| [ ] 5.3 添加回收站页面（30天自动清理） | P1 | 6h | 🔴 未开始 |
| [ ] 5.4 导入冲突添加"合并"策略 | P1 | 4h | 🔴 未开始 |
| [ ] 5.5 导入结果详细报告（成功/失败/原因） | P1 | 3h | 🔴 未开始 |

**验收标准**：
- 删除前显示待删除内容预览
- 误删可在 30 天内恢复
- 导入失败有详细原因说明

---

### 6. 大组件拆分重构
**问题**：CardForm.vue 1375 行，难以维护和测试

| 任务 | 优先级 | 工时 | 状态 |
|------|--------|------|------|
| [ ] 6.1 提取 BaseFields.vue（基础字段输入） | P1 | 3h | 🔴 未开始 |
| [ ] 6.2 提取 DictPanel.vue（字典/AI 结果展示） | P1 | 4h | 🔴 未开始 |
| [ ] 6.3 提取 PinyinSelector.vue（拼音选择） | P1 | 2h | 🔴 未开始 |
| [ ] 6.4 提取 SVGPreview.vue（SVG 预览） | P1 | 2h | 🔴 未开始 |
| [ ] 6.5 提取 TagInput.vue（标签输入） | P1 | 2h | 🔴 未开始 |
| [ ] 6.6 重构后组件集成测试 | P1 | 4h | 🔴 未开始 |

**验收标准**：
- CardForm.vue < 300 行
- 每个子组件有独立测试
- 功能不受影响

---

## 🟡 P2 - 中优先级（提升用户体验）

### 7. 首次使用体验（FTUX）优化
**问题**：新用户登录后面对空白页面，不知所措

| 任务 | 优先级 | 工时 | 状态 |
|------|--------|------|------|
| [ ] 7.1 设计欢迎引导面板 UI | P2 | 2h | 🔴 未开始 |
| [ ] 7.2 实现"加载示例卡片"功能 | P2 | 3h | 🔴 未开始 |
| [ ] 7.3 创建交互式新手教程（5步） | P2 | 6h | 🔴 未开始 |
| [ ] 7.4 添加 SM-2 算法说明页面 | P2 | 2h | 🔴 未开始 |
| [ ] 7.5 首页空状态优化（引导添加卡片） | P2 | 2h | 🔴 未开始 |

**验收标准**：
- 新用户 5 分钟内完成首次复习
- 提供 5-10 张预置示例卡片
- 清晰的功能引导

---

### 8. 复习流程优化
**问题**：评分后需点击"完成"才能下一张，不够流畅

| 任务 | 优先级 | 工时 | 状态 |
|------|--------|------|------|
| [ ] 8.1 实现评分即进入下一张（可配置） | P2 | 3h | 🔴 未开始 |
| [ ] 8.2 添加复习中断恢复功能 | P2 | 4h | 🔴 未开始 |
| [ ] 8.3 优化翻转动画性能 | P2 | 2h | 🔴 未开始 |
| [ ] 8.4 添加复习进度条可视化 | P2 | 2h | 🔴 未开始 |
| [ ] 8.5 添加"暂停"功能 | P2 | 2h | 🔴 未开始 |

**验收标准**：
- 支持快速连续评分模式
- 中断后可从上次位置继续
- 翻转动画 < 100ms

---

### 9. 统计功能增强
**问题**：仅显示基础指标，缺少深度分析

| 任务 | 优先级 | 工时 | 状态 |
|------|--------|------|------|
| [ ] 9.1 添加错误热点分析（TOP 10 易错卡片） | P2 | 4h | 🔴 未开始 |
| [ ] 9.2 添加卡片难度分布图 | P2 | 3h | 🔴 未开始 |
| [ ] 9.3 添加学习效率趋势图 | P2 | 4h | 🔴 未开始 |
| [ ] 9.4 添加"学习建议"面板 | P2 | 4h | 🔴 未开始 |
| [ ] 9.5 支持导出统计报表（CSV） | P2 | 2h | 🔴 未开始 |

**验收标准**：
- 提供至少 5 种统计维度
- 可视化图表清晰易懂
- 有针对性学习建议

---

### 10. 性能优化
**问题**：大量卡片时可能卡顿，SVG 预览阻塞 UI

| 任务 | 优先级 | 工时 | 状态 |
|------|--------|------|------|
| [ ] 10.1 卡片列表虚拟滚动实现 | P2 | 4h | 🔴 未开始 |
| [ ] 10.2 复习日志分页加载 | P2 | 2h | 🔴 未开始 |
| [ ] 10.3 SVG 预览异步生成 | P2 | 3h | 🔴 未开始 |
| [ ] 10.4 图片懒加载实现 | P2 | 2h | 🔴 未开始 |
| [ ] 10.5 首屏加载时间优化（< 900ms） | P2 | 4h | 🔴 未开始 |

**验收标准**：
- 1000+ 卡片列表流畅滚动
- 首屏加载 < 900ms
- AI 生成不阻塞 UI

---

## 🟢 P3 - 低优先级（锦上添花）

### 11. 文档完善

| 任务 | 优先级 | 工时 | 状态 |
|------|--------|------|------|
| [ ] 11.1 创建 PROJECTWIKI.md（项目知识库） | P3 | 4h | 🔴 未开始 |
| [ ] 11.2 生成 Swagger API 文档 | P3 | 3h | 🔴 未开始 |
| [ ] 11.3 完善 CHANGELOG.md | P3 | 1h | 🔴 未开始 |
| [ ] 11.4 编写用户使用指南 | P3 | 4h | 🔴 未开始 |
| [ ] 11.5 添加代码注释（复杂函数） | P3 | 4h | 🔴 未开始 |

---

### 12. 安全加固

| 任务 | 优先级 | 工时 | 状态 |
|------|--------|------|------|
| [ ] 12.1 API Key 前端加密存储 | P3 | 3h | 🔴 未开始 |
| [ ] 12.2 密码强度检查（大小写+数字+符号） | P3 | 2h | 🔴 未开始 |
| [ ] 12.3 登出时清理所有本地数据 | P3 | 1h | 🔴 未开始 |
| [ ] 12.4 添加"删除所有数据"功能（GDPR） | P3 | 3h | 🔴 未开始 |
| [ ] 12.5 CORS 和 CSP 配置检查 | P3 | 2h | 🔴 未开始 |

---

### 13. 其他优化

| 任务 | 优先级 | 工时 | 状态 |
|------|--------|------|------|
| [ ] 13.1 国际化基础框架（vue-i18n） | P3 | 4h | 🔴 未开始 |
| [ ] 13.2 深色模式完善 | P3 | 4h | 🔴 未开始 |
| [ ] 13.3 移动端手势优化 | P3 | 4h | 🔴 未开始 |
| [ ] 13.4 快捷键提示优化 | P3 | 2h | 🔴 未开始 |
| [ ] 13.5 成就徽章系统 | P3 | 8h | 🔴 未开始 |

---

## 📅 迭代计划

### Sprint 1（Week 1-2）：基础修复
**目标**：解决 P0 阻塞问题

| 任务组 | 工时 | 负责人 |
|--------|------|--------|
| 离线功能基础（1.1-1.4） | 22h | - |
| 前端测试框架 + 核心测试（2.1-2.3） | 9h | - |
| AI 解析重构（3.1-3.4） | 16h | - |

**交付物**：
- Service Worker + IndexedDB 基础运行
- Review.vue、FlashCard.vue 测试通过
- AI 解析独立模块 + 测试

---

### Sprint 2（Week 3-4）：体验优化
**目标**：解决 P1 问题，提升核心体验

| 任务组 | 工时 | 负责人 |
|--------|------|--------|
| 错误处理与重试（4.1-4.5） | 16h | - |
| 删除保护（5.1-5.3） | 12h | - |
| 组件拆分（6.1-6.4） | 11h | - |

**交付物**：
- API 请求自动重试
- 软删除 + 回收站
- CardForm 拆分完成

---

### Sprint 3（Week 5-6）：完善发布
**目标**：解决 P2 问题，达到发布标准

| 任务组 | 工时 | 负责人 |
|--------|------|--------|
| FTUX 优化（7.1-7.5） | 15h | - |
| 复习流程优化（8.1-8.3） | 9h | - |
| 统计增强（9.1-9.3） | 11h | - |
| 性能优化（10.1-10.3） | 9h | - |

**交付物**：
- 新用户引导完成
- 快速复习模式
- 增强统计面板
- 性能达标

---

## 📈 进度追踪

### 总体统计

| 优先级 | 任务数 | 已完成 | 进行中 | 未开始 | 完成率 |
|--------|--------|--------|--------|--------|--------|
| P0 | 17 | 0 | 0 | 17 | 0% |
| P1 | 17 | 0 | 0 | 17 | 0% |
| P2 | 20 | 0 | 0 | 20 | 0% |
| P3 | 15 | 0 | 0 | 15 | 0% |
| **总计** | **69** | **0** | **0** | **69** | **0%** |

### 工时统计

| 阶段 | 预估工时 | 实际工时 | 偏差 |
|------|----------|----------|------|
| Sprint 1 | 47h | - | - |
| Sprint 2 | 39h | - | - |
| Sprint 3 | 44h | - | - |
| **总计** | **130h** | **-** | **-** |

---

## ✅ 发布前检查清单

### 功能性
- [ ] 离线基础功能可用
- [ ] 前端测试覆盖 ≥ 70%
- [ ] AI 解析稳定性 ≥ 95%
- [ ] 网络重试机制正常
- [ ] 删除操作有确认

### 用户体验
- [ ] 新用户引导完成
- [ ] 错误消息用户友好
- [ ] 移动端适配正常
- [ ] 首屏加载 < 900ms

### 文档
- [ ] PROJECTWIKI.md 完成
- [ ] API 文档可用
- [ ] 用户指南完成

### 安全
- [ ] API Key 加密存储
- [ ] 登出清理本地数据
- [ ] CORS 配置正确

---

## 🎯 关键里程碑

| 里程碑 | 目标日期 | 状态 | 说明 |
|--------|----------|------|------|
| M1: 基础修复完成 | Week 2 | 🔴 未开始 | P0 全部完成 |
| M2: 体验优化完成 | Week 4 | 🔴 未开始 | P1 全部完成 |
| M3: 发布准备完成 | Week 6 | 🔴 未开始 | P2 核心完成 |
| M4: 正式发布 | Week 7 | 🔴 未开始 | 通过发布检查 |

---

## 📝 更新日志

| 日期 | 更新内容 | 更新人 |
|------|----------|--------|
| 2025-01-27 | 初始版本创建 | PM Review |

---

> 💡 **使用说明**：
> 1. 每完成一项任务，将 `[ ]` 改为 `[x]`
> 2. 更新"进度追踪"中的统计数据
> 3. 每周更新"更新日志"
> 4. 发布前逐项检查"发布前检查清单"
