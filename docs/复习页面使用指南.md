# 复习页面使用指南

## 快速开始

### 启动应用

```bash
# 进入项目根目录
cd /home/momo/github_proj/autoR

# 一键启动
./start.sh
```

访问地址：http://localhost:5173

---

## 复习流程

### 1. 进入复习页面

从首页点击"开始复习"按钮，或直接访问 `/review` 路径。

### 2. 两种模式

#### 🎯 正常复习模式

**触发条件**：有到期的卡片需要复习

**页面显示**：
- 标题显示"复习会话"
- 显示当前进度（如 "3 / 20"）

**操作流程**：
```
查看 SVG 卡片 → 选择难度（1/2/3/4） → 下一张
```

#### 🎯 巩固练习模式

**触发条件**：无到期卡片，但有已学习的卡片

**页面显示**：
- 标题显示"巩固练习"
- 蓝色横幅提示："今日复习已完成！以下是掌握度最低的卡片，建议加强练习。"
- 最多显示10张掌握度最低的卡片

**掌握度评估标准**：
1. 错误次数（lapses）：错误越多，掌握度越低
2. 易忘因子（ef）：ef 值越低，掌握度越低
3. 复习间隔（interval）：间隔越短，掌握度越低

---

## 操作说明

### 视图模式切换

**条件**：卡片包含 SVG 数据时

**切换按钮**：
- 🎨 SVG 卡片（默认）
- 📄 文字模式

### SVG 模式操作

#### 正面显示

- **主要内容**：SVG 卡片图片
- **评分按钮**：4个难度按钮
  - 再来 (1) - 红色
  - 困难 (2) - 橙色
  - 良好 (3) - 绿色
  - 简单 (4) - 蓝色
- **查看详情按钮**：点击查看背面完整信息

#### 操作选择

**选项1：直接评分**
```
看SVG卡片 → 点击难度按钮 → 下一张
```

**选项2：查看详情后评分**
```
看SVG卡片 → 点击"查看详细信息" → 查看背面 → 点击难度按钮 → 下一张
```

### 文字模式操作

#### 正面显示

**英语单词**：
- 显示单词本身
- 不显示音标和释义

**汉字**：
- 显示拼音
- 显示释义
- 不显示汉字本身

#### 背面显示

点击"显示答案"按钮后显示：
- 完整的单词/汉字信息
- 音标/拼音
- 释义
- 例句
- AI增强字段（如果有）

---

## 键盘快捷键

| 按键 | 功能 | 说明 |
|------|------|------|
| 1 | 再来 | 完全不记得，需要重新学习 |
| 2 | 困难 | 记得但很困难 |
| 3 | 良好 | 记得，较为流畅 |
| 4 或 空格 | 简单 | 完全记得，非常流畅 |
| S | 显示答案 | 翻转卡片，查看背面 |
| Z | 撤销 | 撤销上一次评分 |

**使用技巧**：
- 大部分情况下使用键盘操作更快
- 空格键是"简单"，最常用
- 按S查看详情后，再按数字键评分

---

## 统计信息

### 实时统计

页面下方显示三个实时统计：

1. **已完成**：当前会话已复习的卡片数
2. **正确率**：良好(3)和简单(4)的比例
3. **平均耗时**：每张卡片的平均复习时间（秒）

### 完成提示

全部卡片复习完成后，弹出提示：
- 显示本次会话的统计数据
- 询问是否返回首页
- 选择"取消"可重新加载队列

---

## 常见问题

### Q: 为什么有些卡片没有 SVG？

**A**: 可能原因：
1. 卡片是在 SVG 功能开发前创建的
2. 创建卡片时没有生成 SVG

**解决方案**：
- 系统会自动降级到文字模式
- 可以编辑卡片重新生成 SVG

### Q: 掌握度是如何计算的？

**A**: 综合考虑三个因素：
1. **错误次数**（lapses）- 权重最高
2. **易忘因子**（ef）- 低 ef 值说明记忆困难
3. **复习间隔**（interval）- 短间隔说明还未形成长期记忆

计算公式：
```
掌握度排序 = ORDER BY lapses DESC, ef ASC, interval DESC
```

### Q: 为什么今天没有待复习的卡片？

**A**: 可能原因：
1. 所有卡片的复习日期还未到
2. 今天已经完成了所有到期的卡片

**自动处理**：
- 系统会自动切换到"巩固练习模式"
- 推荐10张掌握度最低的卡片供练习

### Q: 撤销功能有限制吗？

**A**:
- 只能撤销上一张卡片的评分
- 无法连续撤销多张
- 撤销会恢复卡片的所有SM-2参数

---

## 学习建议

### 评分标准

**再来 (1)**:
- 完全不记得
- 需要查看答案才能想起
- → 卡片会重新进入学习阶段

**困难 (2)**:
- 记得但很吃力
- 需要思考很久才能想起
- → 间隔会缩短

**良好 (3)**:
- 记得，思考后能想起
- 比较流畅
- → 正常增长间隔

**简单 (4)**:
- 不假思索就能想起
- 完全掌握
- → 间隔增长较多

### 高效复习技巧

1. **专注时段**：选择精力充沛的时间段复习
2. **快速决策**：不要犹豫，根据第一反应评分
3. **利用快捷键**：熟练使用键盘快捷键，提升效率
4. **查看详情**：对于不确定的卡片，多查看背面详细信息
5. **巩固练习**：即使没有到期卡片，也可以进行巩固练习

### SM-2 算法说明

本系统使用 **SuperMemo 2（SM-2）算法**：

**学习阶段**（New）：
```
10分钟 → 1天 → 复习阶段
```

**复习阶段**（Review）：
```
第1次：1天
第2次：6天
第3次：6天 × EF（易忘因子）
第N次：上次间隔 × EF
```

**易忘因子**（EF）：
- 初始值：2.5
- 范围：[1.3, 无上限]
- 评分简单(4)时增加
- 评分困难(2)时减少
- 评分再来(1)时大幅减少

---

## 技术说明

### 前端技术栈

- Vue 3 Composition API
- Axios（API 调用）
- Tailwind CSS（样式）

### 后端技术栈

- Django 5 REST Framework
- SM-2 算法实现
- SQLite 数据库

### API 端点

**获取复习队列**：
```
GET /api/review/queue/?limit=50
```

**提交评分**：
```
POST /api/review/submit/
{
  "card_id": 123,
  "quality": 4,
  "time_taken": 5000
}
```

**撤销评分**：
```
POST /api/review/undo/
{
  "card_id": 123
}
```

---

**最后更新**: 2025-11-26
**版本**: v2.0
